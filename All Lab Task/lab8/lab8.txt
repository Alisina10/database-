postgres=# CREATE TABLE students (
    student_id SERIAL PRIMARY KEY,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    email VARCHAR(150) UNIQUE NOT NULL
);
CREATE TABLE
postgres=# CREATE TABLE courses (
    course_id SERIAL PRIMARY KEY,
    course_name VARCHAR(100) NOT NULL,
    department VARCHAR(100)
);
CREATE TABLE
postgres=# CREATE TABLE enrollments (
    enrollment_id SERIAL PRIMARY KEY,
    student_id INT REFERENCES students(student_id) ON DELETE CASCADE,
    course_id INT REFERENCES courses(course_id) ON DELETE CASCADE,
    semester VARCHAR(20),
    enrollment_date DATE DEFAULT CURRENT_DATE
);
CREATE TABLE
postgres=# INSERT INTO students (first_name, last_name, email) VALUES
('Alice', 'Johnson', 'alice@alatoo.edu.kg'),
('Bob', 'Smith', 'bob@alatoo.edu.kg'),
('Carol', 'Davis', 'carol@alatoo.edu.kg');
INSERT 0 3
postgres=# INSERT INTO courses (course_name, department) VALUES
('Database Systems', 'Computer Science'),
('Linear Algebra', 'Mathematics'),
('Operating Systems', 'Computer Science');
INSERT 0 3
postgres=# SELECT * FROM students;
SELECT * FROM courses;
 student_id | first_name | last_name |        email        
------------+------------+-----------+---------------------
          1 | Alice      | Johnson   | alice@alatoo.edu.kg
          2 | Bob        | Smith     | bob@alatoo.edu.kg
          3 | Carol      | Davis     | carol@alatoo.edu.kg
(3 rows)

 course_id |    course_name    |    department    
-----------+-------------------+------------------
         1 | Database Systems  | Computer Science
         2 | Linear Algebra    | Mathematics
         3 | Operating Systems | Computer Science
(3 rows)

postgres=# INSERT INTO enrollments (student_id, course_id, semester) VALUES
(1, 1, '2024-Spring'),
(1, 2, '2024-Spring'),
(2, 1, '2024-Spring'),
(3, 3, '2024-Spring');
INSERT 0 4
postgres=# DELETE FROM students WHERE student_id = 2;
DELETE 1
postgres=# SELECT * FROM enrollments;
 enrollment_id | student_id | course_id |  semester   | enrollment_date 
---------------+------------+-----------+-------------+-----------------
             1 |          1 |         1 | 2024-Spring | 2025-12-04
             2 |          1 |         2 | 2024-Spring | 2025-12-04
             4 |          3 |         3 | 2024-Spring | 2025-12-04
(3 rows)

postgres=# ALTER TABLE enrollments
DROP CONSTRAINT enrollments_course_id_fkey,
ADD CONSTRAINT enrollments_course_id_fkey
    FOREIGN KEY (course_id)
    REFERENCES courses(course_id)
    ON UPDATE CASCADE;
ALTER TABLE
postgres=# 
